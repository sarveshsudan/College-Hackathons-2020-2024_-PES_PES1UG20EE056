<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Display navigation directions</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.css" rel="stylesheet">
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.js"></script>
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.css" rel="stylesheet">
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.js"></script>
  <link href='https://api.mapbox.com/mapbox.js/v3.2.1/mapbox.css' rel='stylesheet' />
  <script src='https://api.mapbox.com/mapbox.js/v3.2.1/mapbox.js'></script>
  <script src='https://api.mapbox.com/mapbox.js/plugins/turf/v3.0.11/turf.min.js'></script>
  <style>
  body { margin: 0; padding: 0; }
  #map 
  { position: absolute; 
    top: 0; 
    bottom: 0; 
    width: 100%; }

    .marker {
    background-image: url('traffic_light.jpg');
    background-size: cover;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    cursor: pointer;
}
  </style>
</head>
<body>
<script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.1.0/mapbox-gl-directions.js"></script>
<link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.1.0/mapbox-gl-directions.css" type="text/css">
<div id="map"></div>
 
<script>
	mapboxgl.accessToken = 'pk.eyJ1IjoiYW5hc2h1YSIsImEiOiJja3Q1bGUxMXowOXFtMm9wZ2drejFrczZvIn0.b5jmNZ9pkpLAO3J9vdLbYA';

    const map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v11',
    center: [77.56465,12.96197],
    zoom: 13
    });
    map.addControl(
    new mapboxgl.GeolocateControl({
    positionOptions: {
    enableHighAccuracy: true
    },
    // When active the map will receive updates to the device's location as it changes.
    trackUserLocation: true,
    // Draw an arrow next to the location dot to indicate which direction the device is heading.
    showUserHeading: true
    })
    );
map.addControl(
new MapboxDirections({
accessToken: mapboxgl.accessToken
}),
'top-left'
);
map.addControl(new mapboxgl.NavigationControl());

const geojson = {
  type: 'FeatureCollection',
  features: [
    {
      type: 'Feature',
      geometry: {
        type: 'Point',
        coordinates: [77.53319,12.93861]
      },
      properties: {
        title: 'Mapbox',
        description: 'TS1'
      }
    },
    {
      type: 'Feature',
      geometry: {
        type: 'Point',
        coordinates: [77.52835,12.94573]
      },
      properties: {
        title: 'Mapbox',
        description: 'TS2'
      }
    },
    {
      type: 'Feature',
      geometry: {
        type: 'Point',
        coordinates: [77.54834,12.95650]
      },
      properties: {
        title: 'Mapbox',
        description: 'TS3'
      }
    },
    {
      type: 'Feature',
      geometry: {
        type: 'Point',
        coordinates: [77.57729,12.96424]
      },
      properties: {
        title: 'Mapbox',
        description: 'TS4'
      }
    },
    {
      type: 'Feature',
      geometry: {
        type: 'Point',
        coordinates: [77.58916,12.98666]
      },
      properties: {
        title: 'Mapbox',
        description: 'TS4'
      }
    }
  ]
};

// add markers to map
for (const feature of geojson.features) {
  // create a HTML element for each feature
  const el = document.createElement('div');
  el.className = 'marker';

  // make a marker for each feature and add to the map
  new mapboxgl.Marker(el).setLngLat(feature.geometry.coordinates).addTo(map);
}

</script>
 
</body>
</html>